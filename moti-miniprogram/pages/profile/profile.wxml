<!-- 我的页面 - 1:1还原设计稿 -->
<view class="page {{darkMode ? 'dark' : ''}}">
  <!-- 导航栏组件 -->
  <nav-bar title="莫提之地" darkMode="{{darkMode}}" showBack="{{true}}" />

  <view class="container" style="padding-top: {{statusBarHeight}}px;">

    <!-- 用户信息区 -->
    <view class="user-section">
      <view class="user-info">
        <image src="{{userAvatar || '/images/default-avatar.png'}}" class="user-avatar" mode="aspectFill" />
        <view class="user-detail">
          <text class="user-name">{{userName || '莫提'}}</text>
          <text class="user-subtitle">兴奋点 How Excited!</text>
        </view>
      </view>
      <view class="edit-btn" bindtap="goToEditProfile">
        <text>编辑资料</text>
      </view>
    </view>

    <!-- 阅读进度卡片 - 两个独立卡片 -->
    <view class="stats-wrapper">
      <!-- 左卡片：阅读进度 -->
      <view class="stats-card stats-card-left">
        <text class="stats-title">阅读进度</text>
        <view class="progress-section">
          <view class="progress-info">
            <text class="progress-label">已读文章</text>
            <text class="progress-value">{{readArticles || '220'}}/{{totalArticles || '3000'}}</text>
          </view>
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{progressPercent || 7}}%;"></view>
          </view>
        </view>
      </view>
      <!-- 右卡片：你已阅读 -->
      <view class="stats-card stats-card-right">
        <text class="stats-title">你已阅读</text>
        <view class="time-row">
          <text class="time-value">{{readingHours || '110.2'}}</text>
          <text class="time-unit">小时</text>
          <text class="time-value time-days">{{readingDays || '30'}}</text>
          <text class="time-unit">天</text>
        </view>
      </view>
    </view>

    <!-- 会员横幅 -->
    <view class="member-banner" bindtap="goToMembership">
      <image src="/images/icons/crown-member.svg" class="member-icon" mode="aspectFit" />
      <text class="member-text">成为会员 解锁全部内容</text>
    </view>

    <!-- 菜单列表 -->
    <view class="menu-list">
      <!-- 深色模式 -->
      <view class="menu-item">
        <view class="menu-left">
          <image src="/images/icons/profile-darkmode{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">深色模式</text>
        </view>
        <switch class="dark-switch" checked="{{darkMode}}" bindchange="toggleDarkMode" color="#D7942B" />
      </view>

      <!-- 我的收藏 -->
      <view class="menu-item" bindtap="goToFavorites">
        <view class="menu-left">
          <image src="/images/icons/profile-favorites{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">我的收藏</text>
        </view>
        <image src="/images/icons/arrow-right-small.svg" class="menu-arrow" mode="aspectFit" />
      </view>

      <!-- 消息提醒 -->
      <view class="menu-item" bindtap="goToMessages">
        <view class="menu-left">
          <image src="/images/icons/profile-messages{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">消息提醒</text>
        </view>
        <view class="menu-right">
          <view class="badge" wx:if="{{unreadCount > 0}}">
            <text>{{unreadCount > 99 ? '99+' : unreadCount}}</text>
          </view>
          <image src="/images/icons/arrow-right-small.svg" class="menu-arrow" mode="aspectFit" />
        </view>
      </view>

      <!-- 浏览记录 -->
      <view class="menu-item" bindtap="goToHistory">
        <view class="menu-left">
          <image src="/images/icons/profile-history{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">浏览记录</text>
        </view>
        <image src="/images/icons/arrow-right-small.svg" class="menu-arrow" mode="aspectFit" />
      </view>

      <!-- 付款记录 -->
      <view class="menu-item" bindtap="goToPayments">
        <view class="menu-left">
          <image src="/images/icons/profile-payments{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">付款记录</text>
        </view>
        <image src="/images/icons/arrow-right-small.svg" class="menu-arrow" mode="aspectFit" />
      </view>

      <!-- 设置 -->
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-left">
          <image src="/images/icons/profile-settings{{darkMode ? '-dark' : ''}}.svg" class="menu-icon" mode="aspectFit" />
          <text class="menu-text">设置</text>
        </view>
        <image src="/images/icons/arrow-right-small.svg" class="menu-arrow" mode="aspectFit" />
      </view>
    </view>

    <!-- 底部安全区域 -->
    <view class="safe-bottom"></view>

    <!-- 底部 TabBar (复用组件) -->
    <tab-bar current="{{3}}" darkMode="{{darkMode}}" />

  </view>
</view>
