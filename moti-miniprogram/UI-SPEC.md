# UI 复刻规范说明

## 设计稿基准

- **基准尺寸**: 390 x 845 px
- **宽度**: 390px
- **高度**: 845px

## 单位换算

微信小程序使用 `rpx` 作为响应式单位，基准屏幕宽度为 750rpx。

### 换算公式

```
rpx = 设计稿px × (750 / 390)
rpx = 设计稿px × 1.923
```

### 快速换算表

| 设计稿 (px) | 小程序 (rpx) |
|------------|-------------|
| 1          | 1.92        |
| 10         | 19.23       |
| 20         | 38.46       |
| 30         | 57.69       |
| 40         | 76.92       |
| 50         | 96.15       |
| 100        | 192.31      |
| 150        | 288.46      |
| 200        | 384.62      |
| 390 (全宽)  | 750         |

### 简化换算 (约等于)

为了代码整洁，可采用近似值：

```
1px ≈ 2rpx (实际 1.923)
```

或使用精确计算：

```javascript
// utils/ui.js
function px2rpx(px) {
  return Math.round(px * 750 / 390);
}
```

## 坐标说明

- 所有提供的坐标和尺寸均基于 **390 x 845** 设计稿
- X 坐标: 从左边缘开始，范围 0-390
- Y 坐标: 从顶部开始，范围 0-845

## 使用示例

设计稿中一个元素：
- 位置: (20, 100)
- 尺寸: 150 x 80

转换为小程序样式：
```css
.element {
  left: 38rpx;    /* 20 × 1.923 */
  top: 192rpx;    /* 100 × 1.923 */
  width: 288rpx;  /* 150 × 1.923 */
  height: 154rpx; /* 80 × 1.923 */
}
```

---

## 已完成组件

### 1. 底部 TabBar

**设计稿基准：** 390 × 80 px（屏幕 390 × 845）

**布局方式：** 自适应高度，固定贴底（position: fixed; bottom: 0）

| 图层 | 设计稿 (px) | 小程序 (rpx) | 说明 |
|-----|------------|-------------|------|
| 外层容器 | 390 × 80 | 750 × 自适应 | 贴底，高度由内容撑开 |
| 顶部边框 | 390 × 1 | 750 × 2 | #EEEEEE / #111111 |
| 内容区域 padding | 上6 左右23 下6 | 上12 左右44 下12 | 自适应间距 |
| Tab项 | 56 × 48 | 108 × 92 | 4个，space-between 排列 |
| ├─ 图标 | 24 × 24 | 46 × 46 | 水平居中 |
| └─ 文字框 | 56 × 24 | 108 × 46 | 字体 13px → 25rpx |

**颜色：**
| 元素 | 亮色模式 | 暗色模式 |
|-----|---------|---------|
| 背景 | #FFFFFF | #2C2C2C |
| 顶部边框 | #EEEEEE | #111111 |
| 未选中文字 | #AAAFBA | #AAAFBA |
| 选中文字 | #1F1F1F | #E7E7E7 |

**安全区域：** 底部自动适配 safe-area-inset-bottom（刘海屏）

---

### 2. 顶部导航栏

**设计稿基准：** 390 × 90 px（状态栏 46px + 内容 44px）

**布局方式：** 固定顶部，状态栏高度自适应

| 图层 | 设计稿 (px) | 小程序 (rpx) | 说明 |
|-----|------------|-------------|------|
| 外层容器 | 390 × 90 | 750 × 自适应 | 固定顶部 |
| 状态栏 | 390 × 46 | 750 × 动态 | 系统自动获取 |
| 布局框 | 390 × 44 | 750 × 85 | 位置 (0, 46) |
| 返回按钮 | 24 × 24 | 46 × 46 | 位置 (8, 10) 相对布局框 |
| 标题 | 128 × 21 | 246 × 40 | 居中，字体 16px → 31rpx |
| 右侧胶囊 | 81.36 × 30 | 156 × 58 | 位置 (300.64, 7) 相对布局框 |

**颜色：**
| 元素 | 普通模式 | 暗色模式 |
|-----|---------|---------|
| 背景 | #FFFFFF | #1C1C1C |
| 标题文字 | #1F1F1F | #E7E7E7 |
| 返回按钮 | #1F1F1F | #EAEAEA |

**右侧胶囊按钮：**
- 尺寸：81.36 × 30 px → 156 × 58 rpx
- 位置：(300.64, 7) 相对布局框
- 竖线：1.02 × 17.29 px，位置 (340.82, 13.61)

| 元素 | 普通模式 | 暗色模式 |
|-----|---------|---------|
| 填充背景 | #FFFFFF | #1A191F |
| 分享/关闭图标 | #1F1F1F | #FFFFFF |
| 分隔竖线 | #1F1F1F | #F2F2F2 |

**组件文件：**
- `components/nav-bar/nav-bar.wxml`
- `components/nav-bar/nav-bar.wxss`
- `components/nav-bar/nav-bar.js`
- `components/nav-bar/nav-bar.json`

**图标文件：**
- `/images/icons/nav-back-light.svg` (#1F1F1F)
- `/images/icons/nav-back-dark.svg` (#EAEAEA)

**使用方式：**
```html
<nav-bar title="页面标题" darkMode="{{darkMode}}" />
```

**属性：**
| 属性 | 类型 | 默认值 | 说明 |
|-----|------|-------|------|
| title | String | '' | 导航栏标题 |
| showBack | Boolean | true | 是否显示返回按钮 |
| transparent | Boolean | false | 是否透明背景 |
| darkMode | Boolean | false | 是否暗色模式 |

**系统胶囊颜色切换：**
使用微信 API 动态切换系统胶囊颜色（在页面 JS 中调用）：
```javascript
updateNavBarColor(darkMode) {
  wx.setNavigationBarColor({
    frontColor: darkMode ? '#ffffff' : '#000000',
    backgroundColor: darkMode ? '#000000' : '#FFFFFF',
    animation: { duration: 200, timingFunc: 'easeIn' }
  })
}
```

**已应用页面：**
- `pages/index/index` - 首页（最新）
- `pages/profile/profile` - 我的页面
