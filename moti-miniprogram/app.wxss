/**
 * 全局样式 - 统一主题管理
 *
 * 使用方式：
 * 1. 页面根元素添加 class="page {{darkMode ? 'dark' : ''}}"
 * 2. 样式中使用 var(--xxx) 变量
 * 3. 深色模式自动生效，无需额外写样式
 */

/* ============ 基础设置 ============ */
page {
  font-family: "PingFang SC", "Helvetica Neue", "Source Han Sans CN", -apple-system, sans-serif;
  font-size: 28rpx;
  line-height: 1.5;
  background-color: var(--bg-page);
  color: var(--text-primary);
}

/* ============ 浅色主题（默认） ============ */
page, .page {
  /* 背景色 */
  --bg-page: #F3F4F6;
  --bg-primary: #FFFFFF;
  --bg-secondary: #F5F5F5;
  --bg-card: #FFFFFF;
  --bg-input: #FFFFFF;
  --bg-mask: rgba(0, 0, 0, 0.5);

  /* 文字色 */
  --text-primary: #1F1F1F;
  --text-secondary: #666666;
  --text-tertiary: #999999;
  --text-placeholder: #CCCCCC;
  --text-inverse: #FFFFFF;

  /* 主题色 - 橙金色 */
  --color-primary: #D7942B;
  --color-primary-light: #FFF8F0;
  --color-primary-dark: #B87A1F;

  /* 边框 */
  --border-color: #EEEEEE;
  --divider-color: #F0F0F0;

  /* 功能色 */
  --color-success: #52C41A;
  --color-warning: #FAAD14;
  --color-error: #FF4D4F;
  --color-info: #1890FF;

  /* 阴影 */
  --shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);

  /* 圆角 */
  --radius-sm: 8rpx;
  --radius-md: 12rpx;
  --radius-lg: 16rpx;
  --radius-xl: 24rpx;
  --radius-full: 9999rpx;

  /* 间距 */
  --spacing-xs: 8rpx;
  --spacing-sm: 16rpx;
  --spacing-md: 24rpx;
  --spacing-lg: 32rpx;
  --spacing-xl: 48rpx;

  /* 导航栏 */
  --nav-bg: #FFFFFF;
  --nav-title-color: #1F1F1F;

  /* 标签栏 */
  --tab-bg: #FFFFFF;
  --tab-color: #999999;
  --tab-active-color: #D7942B;

  /* 按钮 */
  --btn-primary-bg: #D7942B;
  --btn-primary-color: #FFFFFF;
  --btn-secondary-bg: #FFFFFF;
  --btn-secondary-color: #1F1F1F;
  --btn-secondary-border: #EEEEEE;
  --btn-disabled-bg: #E5C89A;

  /* 输入框 */
  --input-border: #EEEEEE;
  --input-focus-border: #D7942B;

  /* 卡片 */
  --card-bg: #FFFFFF;
  --card-border: transparent;

  /* 胶囊 */
  --capsule-bg: #F4F4F4;
  --capsule-border: transparent;

  /* 兼容旧变量 */
  --accent-color: var(--color-primary);
  --accent-light: var(--color-primary-light);
}

/* ============ 深色主题 ============ */
page.dark, .page.dark {
  /* 背景色 */
  --bg-page: #1A1A1A;
  --bg-primary: #242424;
  --bg-secondary: #2A2A2A;
  --bg-card: #242424;
  --bg-input: #2A2A2A;
  --bg-mask: rgba(0, 0, 0, 0.7);

  /* 文字色 */
  --text-primary: #FFFFFF;
  --text-secondary: #AAAAAA;
  --text-tertiary: #666666;
  --text-placeholder: #555555;
  --text-inverse: #1F1F1F;

  /* 主题色 */
  --color-primary: #D7942B;
  --color-primary-light: #3D3520;
  --color-primary-dark: #E5A73D;

  /* 边框 */
  --border-color: #333333;
  --divider-color: #2F2F2F;

  /* 功能色 */
  --color-success: #73D13D;
  --color-warning: #FFC53D;
  --color-error: #FF7875;
  --color-info: #40A9FF;

  /* 阴影 */
  --shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4rpx 16rpx rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 8rpx 24rpx rgba(0, 0, 0, 0.5);

  /* 导航栏 */
  --nav-bg: #242424;
  --nav-title-color: #FFFFFF;

  /* 标签栏 */
  --tab-bg: #242424;
  --tab-color: #666666;
  --tab-active-color: #D7942B;

  /* 按钮 */
  --btn-secondary-bg: #2A2A2A;
  --btn-secondary-color: #FFFFFF;
  --btn-secondary-border: #3A3A3A;

  /* 输入框 */
  --input-border: #3A3A3A;

  /* 卡片 */
  --card-bg: #242424;
  --card-border: #333333;

  /* 胶囊 */
  --capsule-bg: #333333;
  --capsule-border: #444444;
}

/* ============ 通用组件样式 ============ */

/* 页面容器 */
.page-container {
  min-height: 100vh;
  background-color: var(--bg-page);
}

/* 卡片 */
.card {
  background-color: var(--card-bg);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  box-shadow: var(--shadow-sm);
}

/* 分割线 */
.divider {
  height: 2rpx;
  background-color: var(--divider-color);
}

/* 主按钮 */
.btn-primary {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 88rpx;
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-color);
  border-radius: var(--radius-md);
  font-size: 30rpx;
  font-weight: 500;
  border: none;
}

.btn-primary::after {
  border: none;
}

.btn-primary[disabled] {
  background-color: var(--btn-disabled-bg);
  color: rgba(255, 255, 255, 0.7);
}

/* 次按钮 */
.btn-secondary {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 88rpx;
  background-color: var(--btn-secondary-bg);
  color: var(--btn-secondary-color);
  border: 2rpx solid var(--btn-secondary-border);
  border-radius: var(--radius-md);
  font-size: 30rpx;
  font-weight: 500;
}

.btn-secondary::after {
  border: none;
}

/* 输入框容器 */
.input-box {
  display: flex;
  align-items: center;
  height: 88rpx;
  padding: 0 var(--spacing-lg);
  background-color: var(--bg-input);
  border: 2rpx solid var(--input-border);
  border-radius: var(--radius-md);
}

.input-box input {
  flex: 1;
  height: 100%;
  font-size: 30rpx;
  color: var(--text-primary);
}

/* 导航栏 */
.nav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 88rpx;
  padding: 0 var(--spacing-lg);
  background-color: var(--nav-bg);
}

.nav-title {
  font-size: 28rpx;
  font-weight: 500;
  color: var(--nav-title-color);
}

/* 胶囊按钮 */
.nav-capsule {
  display: flex;
  align-items: center;
  height: 60rpx;
  padding: 0 20rpx;
  background-color: var(--capsule-bg);
  border-radius: var(--radius-full);
}

/* TabBar */
.tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: space-around;
  height: 100rpx;
  padding-bottom: env(safe-area-inset-bottom);
  background-color: var(--tab-bg);
  border-top: 2rpx solid var(--divider-color);
}

.tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6rpx;
}

.tab-item .tab-text {
  font-size: 20rpx;
  color: var(--tab-color);
}

.tab-item.active .tab-text {
  color: var(--tab-active-color);
}

/* 底部安全区域 */
.safe-bottom {
  height: calc(120rpx + env(safe-area-inset-bottom));
}

/* ============ 工具类 ============ */

/* Flex */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-center { align-items: center; justify-content: center; }
.flex-between { justify-content: space-between; }
.flex-1 { flex: 1; }

/* 文字 */
.text-primary { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-tertiary { color: var(--text-tertiary); }
.text-accent { color: var(--color-primary); }

/* 背景 */
.bg-page { background-color: var(--bg-page); }
.bg-primary { background-color: var(--bg-primary); }
.bg-card { background-color: var(--card-bg); }

/* 文字截断 */
.ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 隐藏滚动条 */
::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}
